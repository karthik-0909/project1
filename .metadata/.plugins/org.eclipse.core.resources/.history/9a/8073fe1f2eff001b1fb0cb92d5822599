package com.app;

import java.util.Scanner;

import org.apache.log4j.Logger;

import com.app.exception.BusinessException;
import com.app.service.RegistrtionService;
import com.app.service.impl.RegistrationServiceImpl;



public class Main {
	 private static Logger log=Logger.getLogger(Main.class);

	public static void main(String[] args) {
		
		Scanner scanner=new Scanner(System.in);
		log.info("Welcome to Quick Shop App");
		log.info("-----------------------------");
		
		int option=0;
		do {
		log.info("\n------Main menu------");
		log.info("1)Login as Customer");
		log.info("2)Register as New Customer");
		log.info("3)Login as Employee");
		log.info("4)Exit");
		
		try{
			option=Integer.parseInt(scanner.nextLine());
		}catch(NumberFormatException e) {}
		switch(option){
		case 2:
			log.info("------Registration Page------");
		int loginOption=0;
		do {	
		log.info("1.Registration in with mail");
			log.info("2.Registration with Mobilenumber");
			log.info("3.Back to main menu");
			try {
				loginOption=Integer.parseInt(scanner.nextLine());
			}catch(NumberFormatException e) {}
			switch(loginOption) {
			case 1:
				RegistrtionService registrtionService=new RegistrationServiceImpl();
				int success=0;
				log.info("enter your name");
				String name=scanner.nextLine();
				log.info("Enter your Mail id");
				String mail=scanner.nextLine();
				log.info("enter your password");
				String password=scanner.nextLine();
				try {
					success=registrtionService.CreateNewCustomer(name, mail, password);
					if(success==1) {
						log.info("Registration Successfull \nplease login");
					}
				} catch (BusinessException e) {
					System.out.println(e.getMessage());
				}
				
				break;
			case 2:log.info("Loading...");
			break;
			case 3:log.info("Loading Main menu \nsuccessfull");
			break;
			default:log.info("Please enter a valid Key from 1-4 .... retry again");
			}
			}while(loginOption!=3);
			
			break;
		case 1:log.info("under construction");
			break;
		case 3:log.info("under construction");
			break;
		case 4:log.info("Thank u for using the Qucik Shop app");
			break;
		default :log.warn("plese choose a valid option from 1-4 and retry...");
			break;
		
		}
		}while(option!=4);

	}

}
